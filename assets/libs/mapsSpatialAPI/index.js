/*
 * KT MAP SPATIAL API 3.0.14
 *
 * Copyright 2016, kt corp. All rights reserved
 *
 * This is a proprietary software of kt corp, and you may not use this software
 * except in compliance with license agreement with kt corp. Any redistribution
 * or use of this software, with or without modification shall be strictly
 * prohibited without prior written approval of kt corp, and the copyright
 * notice above does not evidence any actual or intended publication of such
 * software.
 */

olleh.maps.Function||(olleh.maps.Function={bind:function(e,t){var i=Array.prototype.slice.apply(arguments,[2]);return function(){var n=i.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,n)}}}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),$class("olleh.maps.GeoFormat").define({options:null,data:null,keepData:!1,GeoFormat:function(e){olleh.maps.mixin(this,e),this.options=e},destroy:function(){},read:function(e){},write:function(e){}}),$class("olleh.maps.geoformat.XML").extend(olleh.maps.GeoFormat).define({$static:{CONTENT_TYPE:{EMPTY:0,SIMPLE:1,COMPLEX:2,MIXED:3},Try:function(){for(var e=null,t=0,i=arguments.length;t<i;t++){var n=arguments[t];try{e=n();break}catch(e){}}return e},getXmlNodeValue:function(e){var t=null;return olleh.maps.geoformat.XML.Try(function(){(t=e.text)||(t=e.textContent),t||(t=e.firstChild.nodeValue)},function(){t=e.textContent}),t}},namespaces:null,namespaceAlias:null,defaultPrefix:null,readers:{},writers:{},xmldom:null,XML:function(e){for(var t in olleh.maps.util.copyOpts(this,e),window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM")),this.namespaces=olleh.maps.mixin({},this.namespaces),this.namespaceAlias={},this.namespaces)this.namespaceAlias[this.namespaces[t]]=t},read:function(e){var t=e.indexOf("<");t>0&&(e=e.substring(t));var i=olleh.maps.geoformat.XML.Try(olleh.maps.Function.bind(function(){var t;return(t=window.ActiveXObject&&!this.xmldom?new ActiveXObject("Microsoft.XMLDOM"):this.xmldom).loadXML(e),t},this),function(){return(new DOMParser).parseFromString(e,"text/xml")},function(){var t=new XMLHttpRequest;return t.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(e),!1),t.overrideMimeType&&t.overrideMimeType("text/xml"),t.send(null),t.responseXML});return this.keepData&&(this.data=i),i},write:function(e){var t;if(this.xmldom)t=e.xml;else{var i=new XMLSerializer;if(1==e.nodeType){var n=document.implementation.createDocument("","",null);n.importNode&&(e=n.importNode(e,!0)),n.appendChild(e),t=i.serializeToString(n)}else t=i.serializeToString(e)}return t},writeNode:function(e,t,i){var n,s,r=e.indexOf(":");r>0?(n=e.substring(0,r),s=e.substring(r+1)):(n=i?this.namespaceAlias[i.namespaceURI]:this.defaultPrefix,s=e);var a=this.writers[n][s].apply(this,[t]);return i&&i.appendChild(a),a},createElementNS:function(e,t){return this.xmldom?"string"==typeof e?this.xmldom.createNode(1,t,e):this.xmldom.createNode(1,t,""):document.createElementNS(e,t)},createDocumentFragment:function(){return this.xmldom?this.xmldom.createDocumentFragment():document.createDocumentFragment()},createTextNode:function(e){return"string"!=typeof e&&(e=String(e)),this.xmldom?this.xmldom.createTextNode(e):document.createTextNode(e)},getElementsByTagNameNS:function(e,t,i){var n=[];if(e.getElementsByTagNameNS)n=e.getElementsByTagNameNS(t,i);else for(var s,r,a=e.getElementsByTagName("*"),o=0,l=a.length;o<l;++o)r=(s=a[o]).prefix?s.prefix+":"+i:i,"*"!=i&&r!=s.nodeName||"*"!=t&&t!=s.namespaceURI||n.push(s);return n},getAttributeNodeNS:function(e,t,i){var n=null;if(e.getAttributeNodeNS)n=e.getAttributeNodeNS(t,i);else for(var s,r=e.attributes,a=0,o=r.length;a<o;++a)if((s=r[a]).namespaceURI==t&&(s.prefix?s.prefix+":"+i:i)==s.nodeName){n=s;break}return n},getAttributeNS:function(e,t,i){var n="";if(e.getAttributeNS)n=e.getAttributeNS(t,i)||"";else{var s=this.getAttributeNodeNS(e,t,i);s&&(n=s.nodeValue)}return n},createElementNSPlus:function(e,t){var i=(t=t||{}).uri||this.namespaces[t.prefix];if(!i){var n=e.indexOf(":");i=this.namespaces[e.substring(0,n)]}i||(i=this.namespaces[this.defaultPrefix]);var s=this.createElementNS(i,e);t.attributes&&this.setAttributes(s,t.attributes);var r=t.value;return null!=r&&s.appendChild(this.createTextNode(r)),s},setAttributes:function(e,t){var i,n;for(var s in t)null!=t[s]&&t[s].toString&&(i=t[s].toString(),n=this.namespaces[s.substring(0,s.indexOf(":"))]||null,this.setAttributeNS(e,n,s,i))},hasAttributeNS:function(e,t,i){return e.hasAttributeNS?e.hasAttributeNS(t,i):!!this.getAttributeNodeNS(e,t,i)},setAttributeNS:function(e,t,i,n){if(e.setAttributeNS)e.setAttributeNS(t,i,n);else{if(!this.xmldom)throw"setAttributeNS not implemented";if(t){var s=e.ownerDocument.createNode(2,i,t);s.nodeValue=n,e.setAttributeNode(s)}else e.setAttribute(i,n)}},setNamespace:function(e,t){this.namespaces[e]=t,this.namespaceAlias[t]=e},readNode:function(e,t){t||(t={});var i=this.readers[e.namespaceURI?this.namespaceAlias[e.namespaceURI]:this.defaultPrefix];if(i){var n=i[e.localName||e.nodeName.split(":").pop()]||i["*"];n&&n.apply(this,[e,t])}return t},readChildNodes:function(e,t){t||(t={});for(var i,n=e.childNodes,s=0,r=n.length;s<r;++s)1==(i=n[s]).nodeType&&this.readNode(i,t);return t},getChildValue:function(e,t){var i=t||"";if(e)for(var n=e.firstChild;n;n=n.nextSibling)switch(n.nodeType){case 3:case 4:i+=n.nodeValue}return i},isSimpleContent:function(e){for(var t=!0,i=e.firstChild;i;i=i.nextSibling)if(1===i.nodeType){t=!1;break}return t},contentType:function(e){for(var t=!1,i=!1,n=olleh.maps.geoformat.XML.CONTENT_TYPE.EMPTY,s=e.firstChild;s;s=s.nextSibling){switch(s.nodeType){case 1:i=!0;break;case 8:break;default:t=!0}if(i&&t)break}if(i&&t)n=olleh.maps.geoformat.XML.CONTENT_TYPE.MIXED;else{if(i)return olleh.maps.geoformat.XML.CONTENT_TYPE.COMPLEX;if(t)return olleh.maps.geoformat.XML.CONTENT_TYPE.SIMPLE}return n},lookupNamespaceURI:function(e,t){var i=null;if(e)if(e.lookupNamespaceURI)i=e.lookupNamespaceURI(t);else e:switch(e.nodeType){case 1:if(null!==e.namespaceURI&&e.prefix===t){i=e.namespaceURI;break e}var n=e.attributes.length;if(n)for(var s,r=0;r<n;++r){if("xmlns"===(s=e.attributes[r]).prefix&&s.name==="xmlns:"+t){i=s.value||null;break e}if("xmlns"===s.name&&null===t){i=s.value||null;break e}}i=this.lookupNamespaceURI(e.parentNode,t);break e;case 2:i=this.lookupNamespaceURI(e.ownerElement,t);break e;case 9:i=this.lookupNamespaceURI(e.documentElement,t);break e;case 6:case 12:case 10:case 11:break e;default:i=this.lookupNamespaceURI(e.parentNode,t)}return i},getXMLDoc:function(){return olleh.maps.geoformat.XML.document||this.xmldom||(document.implementation&&document.implementation.createDocument?olleh.maps.geoformat.XML.document=document.implementation.createDocument("","",null):!this.xmldom&&window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM"))),olleh.maps.geoformat.XML.document||this.xmldom}}),$class("olleh.maps.spatialapi.util").define({$static:{executeFunctionByName:function(e,t){for(var i=Array.prototype.slice.call(arguments,2),n=e.split("."),s=n.pop(),r=0;r<n.length;r++)t=t[n[r]];return t[s].apply(t,i)},_isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)}}}),$class("olleh.maps.Geocoder").define({$static:{},baseURL:"//api.ollehmap.com:",Geocoder:function(e){var t="53eaf0bbb859f2e3c533c60f5b26b8832ff4a1bd56b6416986329207fd2f0a38b8734817";this.key=t},getGeoCode:function(e,t,i){var n="addr="+this.checkEncoding(e);null!=t&&(n+="&addrcdtype="+t),n+="&key="+this.key;var s=new XMLHttpRequest;s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var r=this.baseURL+"/v1/rest/geocode/Geocode.xml?"+n;s.open("GET",r,!0),s.setRequestHeader("Content-Type","application/xml"),s.onreadystatechange=function(){4===s.readyState&&200===s.status&&(olleh.maps.spatialapi.util._isFunction(i)?i(s.responseText):olleh.maps.spatialapi.util.executeFunctionByName(i,window,s.responseText))},s.send(null)},checkEncoding:function(e,t){if(3==(t=0|++t))return e;var i=e,n=decodeURI(e);return i==n?encodeURI(i):this.checkEncoding(n,t)},getReverseGeoCode:function(e,t,i,n,s,r){var a,o="x="+e.x+"&y="+e.y;null!=t&&(o+="&isMPoi="+t),null!=i&&(o+="&addrcdtype="+i),null!=n&&(o+="&newAddr="+n),null!=s&&(o+="&isJibun="+s),o+="&key="+this.key,a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var l=this.baseURL+"/v1/rest/geocode/Rgeocode.xml?"+o;a.open("GET",l,!0),a.setRequestHeader("Content-Type","application/xml"),a.onreadystatechange=function(){4===a.readyState&&200===a.status&&(olleh.maps.spatialapi.util._isFunction(r)?r(a.responseText):olleh.maps.spatialapi.util.executeFunctionByName(r,window,a.responseText))},a.send(null)},geocode:function(e,t){var i=location.protocol;if(-1==this.baseURL.indexOf("http")&&("https:"==i?this.baseURL=i+this.baseURL+"10083":"http:"==i?this.baseURL=i+this.baseURL+"10082":(i="http:",this.baseURL=i+this.baseURL+"10082")),0==e.type){var n=e.addr?e.addr:null,s=e.addrcdtype?e.addrcdtype:null;this.getGeoCode(n,s,t)}else 1==e.type&&this.getReverseGeoCode(new olleh.maps.UTMK(e.x,e.y),e.isMPoi,e.addrcdtype,e.newAddr,e.isJibun,t)},parseGeocode:function(e){var t=(new olleh.maps.geoformat.XML).read(e),i=t.getElementsByTagName("ID")[0].firstChild.nodeValue,n=t.getElementsByTagName("ERRCD")[0].firstChild.nodeValue,s=t.getElementsByTagName("NO")[0].firstChild.nodeValue,r=t.getElementsByTagName("ERRMS")[0].firstChild.nodeValue;if(0==n){var a,o,l,d,p,h,m,u,c,f,g;if(t.getElementsByTagName("POI_COUNT")[0]&&t.getElementsByTagName("POI_COUNT")[0].firstChild.nodeValue&&(o=parseInt(t.getElementsByTagName("POI_COUNT")[0].firstChild.nodeValue)),a=parseInt(t.getElementsByTagName("COUNT")[0].firstChild.nodeValue),o>0){l=t.getElementsByTagName("POI")[0].getElementsByTagName("DATAS")[0];var y=t.getElementsByTagName("ADDRS")[0].getElementsByTagName("DATAS")[0];d=l.childNodes;var T=y.childNodes;p=new Array(a);var v=new Array(o);for(g=0;g<a;g++){var N=T[g].childNodes;for(u={},h=0;h<N.length;h++)c=N[h].nodeName,f="no value",N[h].firstChild&&(f=N[h].firstChild.nodeValue),u[c.toLowerCase()]=f;p[g]=u}for(var R=0;R<o;R++){m=d[R].childNodes,u={};for(var x=0;x<m.length;x++)c=m[x].nodeName,f="no value",m[x].firstChild&&(f=m[x].firstChild.nodeValue),u[c.toLowerCase()]=f;v[R]=u}return{id:i,errcd:n,no:s,errms:r,count:a,infoarr:p,poicount:o,poiarr:v}}if(a>0&&!(o>0)){for(d=(l=t.getElementsByTagName("DATAS")[0]).childNodes,p=new Array(a),h=0;h<a;h++){for(m=d[h].childNodes,u={},g=0;g<m.length;g++)c=m[g].nodeName,f="no value",m[g].firstChild&&(f=m[g].firstChild.nodeValue),u[c.toLowerCase()]=f;p[h]=u}return{id:i,errcd:n,no:s,errms:r,count:a,infoarr:p}}return{id:i,errcd:n,no:s,errms:r,count:a,infoarr:null}}return{id:i,errcd:n,no:s,errms:r}}}),$class("olleh.maps.DirectionsService").define({baseURL:"//api.ollehmap.com:",key:null,destination:null,origin:null,projection:null,travelMode:null,priority:null,waypoints:null,DirectionsService:function(e){var t="53eaf0bbb859f2e3c533c60f5b26b8832ff4a1bd56b6416986329207fd2f0a38b8734817";this.key=t},route:function(e,t){if(!e.destination)throw new Error("destination is undefined");if(!e.destination||"olleh.maps.UTMK"!=e.destination.$classname)throw new Error("destination is not olleh.maps.UTMK type");if(this.destination=e.destination,!e.origin)throw new Error("origin is undefined");if("olleh.maps.UTMK"!=e.origin.$classname)throw new Error("origin is not olleh.maps.UTMK type");if(this.origin=e.origin,this.projection=e.projection?""+e.projection:"7",!e.travelMode)throw new Error("travelMode is undefined");this.travelMode=e.travelMode,this.priority=e.priority||"0"==e.priority?""+e.priority:null,this.waypoints=e.waypoints&&olleh.maps.isArray(e.waypoints)?e.waypoints:null;var i="";if(this.origin&&(i+="SX="+this.origin.x,i+="&SY="+this.origin.y),this.destination&&(i+="&EX="+this.destination.x,i+="&EY="+this.destination.y),this.travelMode){var n=-1;switch(this.travelMode){case olleh.maps.DirectionsTravelMode.DRIVING:n=0;break;case olleh.maps.DirectionsTravelMode.TRAFFIC:n=1}i+="&RPTYPE="+n}if(i+="&COORDTYPE="+this.projection,this.travelMode!=olleh.maps.DirectionsTravelMode.TRAFFIC&&null!=this.waypoints&&this.waypoints.length>0)for(var s=0,r=this.waypoints.length;s<r&&("olleh.maps.UTMK"!=this.waypoints[s].$classname||(i+="&VX"+(s+1)+"="+this.waypoints[s].x,i+="&VY"+(s+1)+"="+this.waypoints[s].y,2!=s));s++);null!=this.priority&&(i+="&PRIORITY="+this.priority);var a=location.protocol;-1==this.baseURL.indexOf("http")&&("https:"==a?this.baseURL=a+this.baseURL+"10083":"http:"==a?this.baseURL=a+this.baseURL+"10082":(a="http:",this.baseURL=a+this.baseURL+"10082"));var o,l=this.baseURL+"/giop/rest/etc/RouteSearch.xml?";l+=i,(o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4===o.readyState&&200===o.status&&(olleh.maps.spatialapi.util._isFunction(t)?t(o.responseText):"string"==typeof t&&olleh.maps.spatialapi.util.executeFunctionByName(t,window,o.responseText))},o.open("GET",l,!0),o.setRequestHeader("Accept","application/xml"),o.setRequestHeader("x-waple-authorization",this.key),o.send(null)},parseRoute:function(e){if(e&&e.error)return{id:"",errcd:-1,no:"",errms:"server error:"+e.error};var t,i=(new olleh.maps.geoformat.XML).read(e),n=i.getElementsByTagName("ID")[0].firstChild.nodeValue,s=i.getElementsByTagName("ERRCD")[0].firstChild.nodeValue,r=i.getElementsByTagName("NO")[0].firstChild.nodeValue,a=i.getElementsByTagName("ERRMS")[0].firstChild.nodeValue;if(0==s){if("true"==i.getElementsByTagName("isRoute")[0].firstChild.nodeValue){var o,l,d;if("DRIVING"==(null!=i.getElementsByTagName("SROUTE")[0]?"DRIVING":"TRAFFIC")){t={routes:[],links:[],link_version:null,bounds:null,projection:null,total_distance:null,total_duration:null};var p=i.getElementsByTagName("coordtype")[0].firstChild.nodeValue,h=i.getElementsByTagName("link_ver")[0].firstChild.nodeValue,m=i.getElementsByTagName("mbr_maxx")[0].firstChild.nodeValue,u=i.getElementsByTagName("mbr_maxy")[0].firstChild.nodeValue,c=i.getElementsByTagName("mbr_minx")[0].firstChild.nodeValue,f=i.getElementsByTagName("mbr_miny")[0].firstChild.nodeValue;t.projection=p,t.link_version=h,t.bounds=new olleh.maps.Bounds(new olleh.maps.UTMK(c,f),new olleh.maps.UTMK(m,u));var g=i.getElementsByTagName("link")[0].childNodes[0].childNodes;for(o=0,W=g.length;o<W;o++)for(var y=g[o].getElementsByTagName("vertex")[0].getElementsByTagName("DATA"),T=0;T<y.length;T++){var v=y[T];l=v.getElementsByTagName("x")[0].firstChild.nodeValue,d=v.getElementsByTagName("y")[0].firstChild.nodeValue,t.links.push(new olleh.maps.UTMK(l,d))}var N=i.getElementsByTagName("ROUTE")[0],R=N.getElementsByTagName("total_dist")[0].firstChild.nodeValue,x=N.getElementsByTagName("total_time")[0].firstChild.nodeValue,w={text:R+"m",value:Number(R)},b={text:x+"분",value:Number(x)};t.total_distance=w,t.total_duration=b;var M=N.getElementsByTagName("rg")[0].getElementsByTagName("DATA");for(o=0,W=M.length;o<W;o++){var k=M[o],I=k.getElementsByTagName("link_idx")[0].firstChild.nodeValue,E=k.getElementsByTagName("dir_name")[0].hasChildNodes()?k.getElementsByTagName("dir_name")[0].firstChild.nodeValue:"",O=k.getElementsByTagName("nextdist")[0].firstChild.nodeValue,C=k.getElementsByTagName("type")[0].firstChild.nodeValue,S=k.getElementsByTagName("node_name")[0].hasChildNodes()?k.getElementsByTagName("node_name")[0].firstChild.nodeValue:"";l=k.getElementsByTagName("x")[0].firstChild.nodeValue,d=k.getElementsByTagName("y")[0].firstChild.nodeValue;var U={link_idx:Number(I),dir_name:E,nextdist:Number(O),type:C,node_name:S,point:new olleh.maps.UTMK(l,d)};t.routes.push(U)}}else alert("대중교통 정보는 제공되지 않습니다");return{id:n,errcd:s,no:r,errms:a,result:t}}return{id:n,errcd:s,no:r,errms:"isRoute is false",result:null}}return{id:n,errcd:s,no:r,errms:a,result:null}}}),olleh.maps.DirectionsTravelMode={DRIVING:"DRIVING",TRAFFIC:"TRAFFIC"},olleh.maps.DirectionsProjection={Geographic:"0",TM_WEST:"1",TM_MID:"2",TM_EAST:"3",KATEC:"4",UTM_52:"5",UTM_51:"6",UTM_K:"7"},olleh.maps.DirectionsTrafficType={RECOMMEND:"RECOMMEND",BUS:"BUS",SUBWAY:"SUBWAY",BOTH:"BOTH"},olleh.maps.DirectionsDrivePriority={PRIORITY_0:"0",PRIORITY_1:"1",PRIORITY_2:"2",PRIORITY_3:"3",PRIORITY_4:"5"},olleh.maps.DirecionsTrafficPriority={PRIORITY_0:"0",PRIORITY_1:"1",PRIORITY_2:"2",PRIORITY_3:"3"},$class("olleh.maps.DirectionsRenderer").define({$static:{RGTYPE:{0:"안내없음",1:"직진",2:"1시 방향 우회전",3:"2시 방향 우회전",4:"우회전",5:"4시 방향 우회전",6:"5시 방향 우회전",7:"7시 방향 좌회전",8:"8시 방향 좌회전",9:"좌회전",10:"10시 방향 좌회전",11:"11시 방향 좌회전",12:"직진 방향에 고가도로 진입",13:"오른쪽 방향에 고가도로 진입",14:"왼쪽 방향에 고가도로 진입",15:"지하차도",16:"오른쪽 방향에 고가도로 옆 도로",17:"왼쪽 방향에 고가도로 옆 도로",18:"오른쪽 방향에 지하차도 옆 도로",19:"왼쪽 방향에 지하차도 옆 도로",20:"오른쪽 도로",21:"왼쪽 도로",22:"직진 방향에 고속도로 진입",23:"오른쪽 방향에 고속도로 진입",24:"왼쪽 방향에 고속도로 진입",25:"직진 방향에 도시고속도로 진입",26:"오른쪽 방향에 도시고속도로 진입",27:"왼쪽 방향에 도시고속도로 진입",28:"오른쪽 방향에 고속도로 출구",29:"왼쪽 방향에 고속도로 출구",30:"오른쪽 방향에 도시고속도로 출구",31:"왼쪽 방향에 도시고속도로 출구",32:"분기점에서 직진",33:"분기점에서 오른쪽",34:"분기점에서 왼쪽",35:"U-turn",36:"무발성 직진",37:"터널",38:"없음",39:"없음",40:"로터리에서 1시 방향",41:"로터리에서 2시 방향",42:"로터리에서 3시 방향",43:"로터리에서 4시 방향",44:"로터리에서 5시 방향",45:"로터리에서 6시 방향",46:"로터리에서 7시 방향",47:"로터리에서 8시 방향",48:"로터리에서 9시 방향",49:"로터리에서 10시 방향",50:"로터리에서 11시 방향",51:"로터리에서 12시 방향",999:"출발지",1000:"경유지",1001:"도착지"}},directions:null,map:null,markerOptions:null,polylineOptions:null,keepView:!0,offMarkers:!1,offPolylines:!1,resultIndex:0,travelMode:null,links:null,markers:null,curTrraficSort:"RECOMMEND",trraficResultIndex:0,event:olleh.maps.browser.isMobile?"touchend":"click",imageURL:"//map.ktgis.com/MapAPI/images/",DirectionsRenderer:function(e){this.markerOptions={},this.polylineOptions={},this.markers=[],this.links=[],e.map&&(this.map=e.map),e.markerOptions&&(this.markerOptions=e.markerOptions),this.markerOptions.map||(this.markerOptions.map=this.map),e.polylineOptions&&(this.polylineOptions=e.polylineOptions),null!=e.keepView&&(this.keepView=e.keepView),null!=e.offMarkers&&(this.offMarkers=e.offMarkers),null!=e.offPolylines&&(this.offPolylines=e.offPolylines),e.directions&&(this.directions=e.directions)},getIndex:function(e){if("TRAFFIC"==this.travelMode){for(var t=this.directions.result,i=0,n=t.length;i<n;i++)if(t[i].type==e)return t[i].result_count;return 0}return null},setIndex:function(e,t){"TRAFFIC"==this.travelMode&&(this.curTrraficSort=e,this.trraficResultIndex=Number(t))},getRecommendCount:function(){return this.getIndex("RECOMMEND")},setRecommendIndex:function(e){this.setIndex("RECOMMEND",e)},getBothCount:function(){return this.getIndex("BOTH")},setBothIndex:function(e){this.setIndex("BOTH",e)},getBusCount:function(){return this.getIndex("BUS")},setBusIndex:function(e){this.setIndex("BUS",e)},getSubwayCount:function(){return this.getIndex("SUBWAY")},setSubwayIndex:function(e){this.setIndex("SUBWAY",e)},getDirections:function(){return this.directions},getMap:function(){return this.map},removeDirections:function(){this.linksSetMap(null);for(var e=0,t=this.markers.length;e<t;e++)this.markers[e].refer&&(this.markers[e].refer.direction=null,this.markers[e].refer.infoWin=null,this.markers[e].refer=null),this.markers[e].setMap(null);this.markers.length=0},setDirections:function(e){this.directions=e,this.getMap()&&this.removeDirections(),this.setMap(this.map)},setMap:function(e){var t,i;if(null==e)this.removeDirections(),this.map=null;else if(this.getMap()&&this.setMap(null),this.map=e,this.directions&&this.directions.result){var n=this.directions.result,s=null;for(t=0,i=n.length;t<i;t++)if(n[t].type&&("BOTH"==(s=n[t].type)||"BUS"==s||"RECOMMEND"==s||"SUBWAY"==s)){s="TRAFFIC";break}this.travelMode=s||"DRIVING",this.offMarkers?this.markerOptions.visible=!1:this.markerOptions.visible=!0;var r=this.markerOptions.title?this.markerOptions.title:"",a=this.markerOptions.zIndex?Number(this.markerOptions.zIndex):0,o=olleh.maps.mixin({},this.markerOptions);if(this.polylineOptions.strokeColor||(this.polylineOptions.strokeColor="#ff3131"),this.polylineOptions.strokeWeight||(this.polylineOptions.strokeWeight=5),"DRIVING"==this.travelMode)n.links&&(this.polylineOptions.path=n.links,this.drawLinks(e),this.keepView&&this.directions.result.bounds&&this.map.fitBounds(this.directions.result.bounds)),n.routes&&this.drawRgs(this.markers,this.directions.result,o,r,a);else if("TRAFFIC"==this.travelMode){var l=null,d=!0;for(t=0,i=n.length;t<i;t++)if(n[t].type==this.curTrraficSort)for(var p=0;p<n[t].result.length;p++){var h=n[t].result[p];if(p==this.trraficResultIndex){var m=h.display_bounds;d&&(l=m,d=!1),l.left>m.left&&(l.left=m.left),l.bottom>m.bottom&&(l.bottom=m.bottom),l.right<m.right&&(l.right=m.right),l.top<m.top&&(l.top=m.top),this.drawRgs(this.markers,h,o,r,a);for(var u=0;u<h.methods.length;u++)this.polylineOptions.path=h.methods[u].points,this.drawLinks(e)}}l&&!this.offPolylines&&this.keepView&&this.map.fitBounds(l)}}},linksSetMap:function(e){for(var t=0,i=this.links.length;t<i;t++)this.links[t].setMap(e);null==e&&(this.links.length=0)},drawLinks:function(e){var t=olleh.maps.util.clone(this.polylineOptions);delete t.path,t.path=new olleh.maps.Path(this.polylineOptions.path),this.links.push(new olleh.maps.vector.Polyline(t)),this.offPolylines?this.linksSetMap(null):this.linksSetMap(e)},getContent:function(e,t,i,n){var s=t[i],r="",a="",o='"color:#767676;padding-right:12px;vertical-align:top;white-space:nowrap"',l='"font-family: dotum, arial, sans-serif;font-size: 18px; font-weight: bold;margin-bottom: 5px;"';if("DRIVING"==e){var d=""!=s.node_name?s.node_name:"정보없음",p=this.getRgTypeStr(s.type),h="",m="";"출발지"==p||"경유지"==p||"도착지"==p?(a=p,"경유지"!=p&&(h=this.directions.result.total_duration.text,m=this.directions.result.total_distance.text)):a=d,r+="<div style="+l+">"+a+"</div>",r+='<table class="ts" style="border-spacing: 2px; border: 0px"><tbody>',r+="<tr><td style="+o+">방면정보</td><td><span>"+(""!=s.dir_name?s.dir_name:"정보없음")+"</span></td><tr>",r+="<tr><td style="+o+">구간거리</td><td><span>"+s.nextdist+"m</span></td><tr>",r+="<tr><td style="+o+">이정표</td><td><span>"+p+"</span></td><tr>",""!=m&&(r+="<tr><td style="+o+">총거리</td><td><span>"+m+"</span></td><tr>"),""!=h&&(r+="<tr><td style="+o+">총시간</td><td><span>"+h+"</span></td><tr>")}else if("TRAFFIC"==this.travelMode&&(s.startname&&(a=s.startname+"/"),s.endname&&(a+=s.endname),r+="<div style="+l+">"+a+"</div>",s.rgtype)){var u="",c="",f="";s.distance&&""!=s.distance?(f=s.distance,"1"==s.rgtype||"2"==s.rgtype||"4"==s.rgtype?f+=" 개":"3"==s.rgtype&&(f+="m")):f="정보없음";var g="";if("1"==s.rgtype)g=this.getMethodtypeStr(s.methodtype),c=s.lanename+" "+g,u="정거장갯수";else if("2"==s.rgtype)c=s.lanename+" 지하철",u="정거장갯수";else if("3"==s.rgtype)c="도보",s.distance&&(u="구간거리");else if("4"==s.rgtype){for(var y="",T=i;"4"==y;)y=t[--T-1].rgtype;c="1"==y?s.lanename+"노선 버스 환승":"2"==y?s.lanename+" 지하철 환승":s.lanename+" 환승",u="정거장갯수"}r+='<table class="ts" style="border-spacing: 2px; border: 0px"><tbody>',r+="<tr><td style="+o+">이동수단</td><td><span>"+c+"</span></td><tr>",r+="<tr><td style="+o+">"+u+"</td><td><span>"+f+"</span></td><tr>",0!=i&&t.length-1!=i||(r+="<tr><td style="+o+">발생요금</td><td><span>"+n.route_charge+"</span></td><tr>",r+="<tr><td style="+o+">총거리</td><td><span>"+n.route_totaldistance.text+"</span></td><tr>",r+="<tr><td style="+o+">총시간</td><td><span>"+n.route_totalduration.text+"</span></td><tr>",r+="<tr><td style="+o+">버스 이용횟수</td><td><span>"+n.route_buscount+"</span></td><tr>",r+="<tr><td style="+o+">지하철 이용횟수</td><td><span>"+n.route_subwaycount+"</span></td><tr>")}return{content:r+="</tbody></table>",title:a}},drawRgs:function(e,t,i,n,s){var r=t.routes,a=location.protocol;if(-1==this.imageURL.indexOf("http")&&("https:"==a?this.imageURL=a+this.imageURL:"http:"==a?this.imageURL=a+this.imageURL:(a="http:",this.imageURL=a+this.imageURL)),r&&i)for(var o=0,l=r.length;o<l;o++){var d=r[o],p=this.getContent(this.travelMode,r,o,t);if(i.position=new olleh.maps.UTMK(d.point.x,d.point.y),i.title=""!=n?n:p.title,0==o)this.markerOptions.zIndex?i.zIndex=s+1:i.zIndex=1,this.markerOptions.shadow&&(i.shadow={url:this.imageURL+"mark02.png",size:new olleh.maps.Size(37,32),anchor:new olleh.maps.Point(18.5,32)}),i.icon={url:this.imageURL+"poi01.png",size:new olleh.maps.Size(30,43),anchor:new olleh.maps.Point(15,43)};else if(o==r.length-1)this.markerOptions.zIndex?i.zIndex=s+1:i.zIndex=1,this.markerOptions.shadow&&(i.shadow={url:this.imageURL+"mark02.png",size:new olleh.maps.Size(37,32),anchor:new olleh.maps.Point(18.5,32)}),i.icon={url:this.imageURL+"poi02.png",size:new olleh.maps.Size(30,43),anchor:new olleh.maps.Point(15,43)};else if("1000"==d.type)this.markerOptions.zIndex?i.zIndex=s+1:i.zIndex=1,this.markerOptions.shadow&&(i.shadow={url:this.imageURL+"mark02.png",size:new olleh.maps.Size(37,32),anchor:new olleh.maps.Point(18.5,32)}),i.icon={url:this.imageURL+"poi03.png",size:new olleh.maps.Size(30,43),anchor:new olleh.maps.Point(15,43)};else if(this.markerOptions.icon)i.zIndex?i.zIndex=s:i.zIndex=0,this.markerOptions.shadow&&(i.shadow=this.markerOptions.shadow.clone()),i.icon=this.markerOptions.icon.clone();else{if(i.zIndex?i.zIndex=s:i.zIndex=0,this.markerOptions.shadow)(new olleh.maps.SpritedImage).setStyles({marginLeft:"-12.5px",marginTop:"21px"}).setImage(this.imageURL+"mark02.png",new olleh.maps.Point(0,0),new olleh.maps.Size(25,21)),i.shadow={url:this.imageURL+"mark02.png",size:new olleh.maps.Size(25,21),anchor:new olleh.maps.Point(12.5,21)};var h="DRIVING"==this.travelMode?"poi05.png":"poi04.png";i.icon={url:this.imageURL+h,size:new olleh.maps.Size(20,29),anchor:new olleh.maps.Point(10,29)}}var m=new olleh.maps.overlay.Marker(i);e.push(m);var u=new olleh.maps.overlay.InfoWindow({content:p.content,disableAutoPan:!1,animation:olleh.maps.overlay.Marker.DROP,padding:"20px"});m.refer={},m.refer.infoWin=u,m.refer.direction=1,m.refer.map=map,m.onEvent(this.event,function(){var e=this.refer.infoWin;this.refer.direction>0?e.open(this.refer.map,this):e.close(),this.refer.direction=-this.refer.direction})}},setOptions:function(e){e.map&&(this.map=e.map),e.markerOptions&&(this.markerOptions=e.markerOptions),this.markerOptions.map||(this.markerOptions.map=this.map),e.polylineOptions&&(this.polylineOptions=e.polylineOptions),this.keepView=null==e.keepView||e.keepView,this.offMarkers=null!=e.offMarkers&&e.offMarkers,this.offPolylines=null!=e.offPolylines&&e.offPolylines,e.directions&&(this.directions=e.directions),this.getMap()&&this.removeDirections(),this.setMap(this.map)},getRgTypeStr:function(e){return olleh.maps.DirectionsRenderer.RGTYPE[e]||olleh.maps.DirectionsRenderer.RGTYPE[0]}});